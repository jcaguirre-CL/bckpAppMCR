!function(){"use strict";function e(e,a,r,o,t){var n=this,i=document.getElementById("parametroUnoId"),l=document.getElementById("parametroDosId"),c=document.getElementById("parametroTresId"),s=document.getElementById("parametroCuatroId"),u=document.getElementById("parametroCincoId");n.dataArray=[],n.array=[],n.placeParametroUno="",n.placeParametroDos="",n.placeParametroTres="",n.placeParametroCuatro="",n.placeParametroCinco="",n.options={},n.formData={},n.parametros=["Area de Falla","Tipo de Falla","Señal","Servicio"],n.tipoGraficos=["Circular","Lineal"],n.tipoLineales=["Mensual","Anual"],n.tipoAnuales=["2016","2017","2018"],n.tipoMeses=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],n.placePlataforma="",n.valueParametroUno="Parametro",n.valueParametroDos="TipoGrafico",n.valueParametroTres="TipoLineal",n.valueParametroCuatro="TipoAnual",n.valueParametroCinco="TipoMensual",n.CurrentDate=new Date,n.selectParametroUno=function(){n.placeParametroUno=n.parametroUnoSelect,n.valueParametroUno=n.parametroUnoSelect,i.selectedIndex=0},n.selectParametroDos=function(){n.placeParametroDos=n.parametroDosSelect,n.valueParametroDos=n.parametroDosSelect,1==l.selectedIndex?(n.mostrarFechaIni=1,n.mostrarFechaFin=1,n.mostrarTipoLineal=0,n.mostrarTipoMensual=0,n.mostrarTipoAnual=0):2==l.selectedIndex&&(n.mostrarFechaIni=0,n.mostrarFechaFin=0,n.mostrarTipoLineal=1,n.mostrarTipoMensual=0,n.mostrarTipoAnual=0),l.selectedIndex=0,c.selectedIndex=0,s.selectedIndex=0,u.selectedIndex=0,n.placeParametroTres="",n.placeParametroCuatro="",n.placeParametroCinco=""},n.selectParametroTres=function(){n.placeParametroTres=n.parametroTresSelect,n.valueParametroTres=n.parametroTresSelect,1==c.selectedIndex?(n.mostrarFechaIni=0,n.mostrarFechaFin=0,n.mostrarTipoLineal=1,n.mostrarTipoMensual=1,n.mostrarTipoAnual=0):2==c.selectedIndex&&(n.mostrarFechaIni=0,n.mostrarFechaFin=0,n.mostrarTipoLineal=1,n.mostrarTipoMensual=0,n.mostrarTipoAnual=1),c.selectedIndex=0},n.selectParametroCuatro=function(){n.placeParametroCuatro=n.parametroCuatroSelect,n.valueParametroCuatro=n.parametroCuatroSelect,n.mostrarFechaIni=0,n.mostrarFechaFin=0,n.mostrarTipoLineal=1,n.mostrarTipoMensual=1,n.mostrarTipoAnual=1,s.selectedIndex=0},n.selectParametroCinco=function(){n.placeParametroCinco=n.parametroCincoSelect,n.valueParametroCinco=n.parametroCincoSelect,u.selectedIndex=0},n.crearGrafico=function(r,i,l,c,s,u,d){var m=(a.defer(),new Date,{});switch(r){case"Area de Falla":n.array=["0","1","2","3","4"],r="areafalla";break;case"Tipo de Falla":n.array=["0","1","2","3","4","5","6"],r="tipofalla";break;case"Señal":n.array=["0","1","2","3","4"],r="senal";break;case"Servicio":n.array=["0","1","2","3","4"],r="servicio"}if("Circular"===i)m=o.circular(r,u,d,n.array).then(function(a){e(function(){var e=new FusionCharts(t.dataSource("circular",r,"null",a));e.render()},500)});else{var p=l,f=s,v=c;switch(r){case"areafalla":var h=["Sin mencionar","Sistema Emisiom","Contenido Emision","PGM en vivo","Equipos linea TX"],S=["0","1","2","3","4"];break;case"tipofalla":var h=["Sin mencionar","Audio","Video","Audio y Video","Equipo","Humana","Enlace"],S=["0","1","2","3","4","5","6"];break;case"senal":var h=["Sin mencionar","Nacional SD","Nacional HD","Cable","Todas"],S=["0","1","2","3","4"];break;case"servicio":var h=["Sin mencionar","Bien","Malo por audio","Malo por video","Malo por Audio y Video"],S=["0","1","2","3","4"]}switch(p){case"diario":var b=["Lun","Mar","Mie","Jue","Vie","Sab","Dom"];break;case"Mensual":var b=["Semana 1","Semana 2","Semana 3","Semana 4","Semana 5"];break;case"Anual":var b=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"]}var T=[],g={};angular.forEach(b,function(e,a){T[a]={label:e}}),g=o.lineal(r,S,h,b,p,f,v),g.then(function(a){e(function(){var e=new FusionCharts(t.dataSource("lineal",r,T,a));e.render()},500)})}},$(function(){var e=$(".sidebar-links > div");e.on("click",function(){e.removeClass("selected"),$(this).addClass("selected")})})}function a(e,a,r){var o=this,t=function(e){var a=-1,r=e.length,o=function(){return a++,a==r?(console.log("call:",e.callback()),e.callback()):void e.functionToLoop(o,a)};o();return e.callback()};o.circular=function(r,o,n,i){var l=e.defer(),c=[],s={};return s=t({length:i.length,functionToLoop:function(t,l){e.defer(),a.consulta3dvecesbyParameters(r,i[l],o,n).then(function(e){c.push({value:e.data.value.toString()})});t()},callback:function(){return c}}),l.resolve(s),l.promise},o.lineal=function(o,n,i,l,c,s,u){var d=[],m=e.defer(),p={};if("Anual"===c)var f=[0,1,2,3,4,5,6,7,8,9,10,11];return p=t({length:n.length,functionToLoop:function(t,l){for(var u=e.defer(),m=[],p=0;p<f.length;p++){if("Anual"===c)var v=r("date")(new Date(s,f[p],1),"yyyy-MM-dd"),h=r("date")(new Date(s,f[p],28),"yyyy-MM-dd");a.consulta3dvecesbyParameters(o,n[l],v,h).then(function(e){m.push({value:e.data.value.toString()})})}u.resolve(m),d.push({seriesname:i[l],data:u.promise.$$state.value}),t()},callback:function(){return d}}),m.resolve(p),m.promise}}function r(e){var a={};return a.tipo="lineal",a.dataSource=function(e,a,r,o){if("lineal"==e){var t={};return t={type:"msline",id:"container-chart1",width:"700",height:"600",renderAt:"chart-container1",dataFormat:"json",dataSource:{chart:{caption:"Eventos registrados la ultima semana/mes/año",subCaption:"Evaluando en base a parametro: "+a,captionFontSize:"14",subcaptionFontSize:"14",subcaptionFontBold:"0",paletteColors:"#0075c2,#1aaf5d,#f2c500,#f45b00,#8e0000,#f4000c,#00d5f4",bgcolor:"#ffffff",showBorder:"0",exportEnabled:"1",showShadow:"0",showCanvasBorder:"0",usePlotGradientColor:"0",legendBorderAlpha:"0",legendShadow:"1",showAxisLines:"0",showAlternateHGridColor:"0",divlineThickness:"1",divLineDashed:"1",divLineDashLen:"1",xAxisName:"Dias",showValues:"0"},categories:[{category:r}],dataset:o}}}var n={type:"pie3d",id:"container-chart1",width:"700",height:"600",renderAt:"chart-container1",dataFormat:"json",dataSource:{chart:{subCaption:"Listado de la totalidad de eventos por plataforma/periodo",caption:"Eventos por: "+a,captionFontSize:"14",subcaptionFontSize:"10",subcaptionFontBold:"0",bgcolor:"#ffffff",bgAlpha:"70,80",bgRatio:"60, 40",paletteColors:"#0075c2,#1aaf5d,#f2c500,#f45b00,#8e0000,#f4000c,#00d5f4",use3DLighting:0,borderColor:"#EEEEEE",exportEnabled:"1",borderThickness:3,use3DLighting:"0",showShadow:"1",enableSmartLabels:"0",startingAngle:"0",showPercentValues:"1",showPercentInTooltip:"0",decimals:"1",captionFontSize:"14",subcaptionFontSize:"14",subcaptionFontBold:"0",toolTipColor:"#ffffff",toolTipBorderThickness:"0",toolTipBgColor:"#000000",toolTipBgAlpha:"80",toolTipBorderRadius:"2",toolTipPadding:"5",showHoverEffect:"1",showLegend:"1",legendBgColor:"#ffffff",legendBorderAlpha:"0",legendShadow:"1",legendItemFontSize:"10",legendItemFontColor:"#666666",useDataPlotColorForLabels:"1"},data:o}};return n},a}function o(e,a){var r=this;r.consulta3dvecesbyParameters=function(r,o,t,n){var i=e.defer(),l=a({method:"GET",url:"http://10.128.2.25:3000/api/queryTimesbyparameters/"+r+"/"+o+"/"+t+"/"+n});return i.resolve(l),i.promise}}angular.module("app").controller("generarGraficoController",e).service("GraficoService",o).service("CrearVarService",a).factory("CrearGrafFactory",r),e.$inject=["$timeout","$q","GraficoService","CrearVarService","CrearGrafFactory"],a.$inject=["$q","GraficoService","$filter"],r.$inject=["$q"],o.$inject=["$q","$http"]}();
